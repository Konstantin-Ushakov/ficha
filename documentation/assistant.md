## Сравнительный анализ критериев проверки фичи (.md) и фиче‑тестов (.feature)

Зачем: этот обзор помогает выбрать и приоритизировать проверки качества фич и фиче‑тестов, понять стоимость и отдачу каждой проверки, а также получить конкретные рекомендации, что править, чтобы пройти валидацию.

Определения столбцов (название = определение):
- Что проверяет = краткое описание аспекта, который оценивается критерием.
- Реализован сейчас = статус наличия проверки в текущем анализаторе (да/нет/частично).
- Затраты запуска (1 фича) = ориентировочные ресурсы/время на один прогон (CPU, сек/мин; низкие/средние/высокие).
- Затраты поддержки = сложность сопровождения правила/метрики (низкие/средние/высокие).
- Метрики (вывод) = формат выходных данных (да, числовые / да, категориальные / нет).
- Влияние на задачу = насколько метрика полезна для цели «фича корректна и покрыта тестами» (низкое/среднее/высокое).
- Точность = ожидаемая точность с учётом допущений (да/частично/нет + пояснения при необходимости).
- User‑friendly = можно ли кратко объяснить ценность метрики неспециалисту (да/нет).
- Описание критерия в отчёте = наличие понятного текста в отчёте (да/нет).
- Рекомендации (общие) = есть ли общие советы по исправлению (да/нет).
- Рекомендации (конкретные) = есть ли адресные советы (да/частично/нет).
- Простота реализации = сложность внедрения (высокая/средняя/низкая).
- Понятность = насколько правило прозрачно (высокая/средняя/низкая).
- Предсказуемость исправлений = гарантирует ли правка рост метрики (да/частично уверенно/частично неуверенно/нет).
- Популярность = распространённость подхода в индустрии (низкая/средняя/высокая).
- Обоснованность = есть ли обоснование/теория/практика под метрикой (текст/нет).
- Быстрая правка (итераций) = оценка числа итераций правок до прохождения (1/2/3/4–5/6–10/нет).
- Авто‑фиксируемость = можно ли автоматически применить часть правок (да/частично/нет).
- Итоговая оценка = сумма взвешенных баллов по столбцам (см. карту значимости). Максимум = 105 баллов (при значениях «Да»/«Высокое»/«1 итерация» и т.п.).

Карта значимости критериев и веса (0 — самые значимые, 5 — наименее):
- Группа 0 (вес 10): Предсказуемость исправлений, Авто‑фиксируемость, Быстрая правка (итераций), Влияние на задачу, Рекомендации (конкретные)
- Группа 1 (вес 7): Рекомендации (общие), Обоснованность, Понятность, Метрики (вывод), Затраты запуска (1 фича)
- Группа 2 (вес 5): Описание критерия в отчёте, Точность
- Группа 3 (вес 3): Простота реализации, Затраты поддержки
- Группа 4 (вес 2): User‑friendly
- Группа 5 (вес 1): Популярность, Реализован сейчас

Карта значимости по столбцам (категория/вес/коэф. значений):

| Столбец | Категория (0–5) | Вес | Коэф. значений |
|---|---:|---:|---|
| Предсказуемость исправлений | 0 | 10 | да=1; частично уверенно=0.66; частично неуверенно=0.33; нет=0 |
| Авто‑фиксируемость | 0 | 10 | да=1; частично=0.5; нет=0 |
| Быстрая правка (итераций) | 0 | 10 | 1=1; 2=0.85; 3=0.70; 4–5=0.50; 6–10=0.20; нет=0 |
| Влияние на задачу | 0 | 10 | высокое=1; среднее=0.60; низкое=0.30 |
| Рекомендации (конкретные) | 0 | 10 | да=1; частично=0.5; нет=0 |
| Согласованность | 0 | 10 | да=1; частично/полностью согласуется=0.8; полностью/частично согласуется=0.5; частично/частично=0.1; нет=0 |
| Рекомендации (общие) | 1 | 7 | да=1; частично=0.5; нет=0 |
| Обоснованность | 1 | 7 | есть текст=1; нет=0 |
| Понятность | 1 | 7 | высокая=1; средняя=0.5; низкая=0 |
| Метрики (вывод) | 1 | 7 | да, числовые=1; да, категор.=0.5; нет=0 |
| Затраты запуска (1 фича) | 1 | 7 | низкие=1; низкие/ср=0.85; ср=0.70; ср/выс=0.50; высокие=0.30 |
| Описание критерия в отчёте | 2 | 5 | да=1; нет=0 |
| Точность | 2 | 5 | да=1; частично=0.5; нет=0 |
| Простота реализации | 3 | 3 | низкая=1; средняя=0.5; высокая=0 |
| Затраты поддержки | 3 | 3 | низкие=1; средние=0.5; высокие=0 |
| User‑friendly | 4 | 2 | да=1; нет=0 |
| Популярность | 5 | 1 | высокая=1; средняя=0.5; низкая=0 |
| Реализован сейчас | 5 | 1 | да=1; частично=0.5; нет=0 |

### 1) Является ли .md фичой по определению

| Критерий | Итоговая оценка | Предсказуемость исправлений | Авто‑фиксируемость | Быстрая правка (итераций) | Влияние на задачу | Рекомендации (конкретные) | Согласованность | Рекомендации (общие) | Обоснованность | Понятность | Метрики (вывод) | Затраты запуска (1 фича) | Описание критерия в отчёте | Точность | Простота реализации | Затраты поддержки | User‑friendly | Популярность | Реализован сейчас |
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
| Terminology consistency | 104.0 | Да | Да | 2 | Среднее | Да | Да | Да | Есть текст | Высокая | Да, числовые | Низкие | Да | Частично | Средняя | Низкие | Да | Средняя | Нет |
| FVI_mit (валидность .md как фичи) | 98.1 | Частично уверенно | Частично | 2 | Высокое | Да | Частично/полностью согласуется | Да | Есть текст | Высокая | Да, числовые | Низкие | Да | Частично | Средняя | Низкие | Да | Средняя | Частично |
| Readability score | 89.5 | Да | Частично | 1 | Среднее | Частично | Полностью/частично согласуется | Да | Есть текст | Высокая | Да, числовые | Низкие | Да | Частично | Высокая | Низкие | Да | Высокая | Нет |
| Agglomerative clustering | 80.55 | Частично уверенно | Частично | 2 | Среднее | Частично | Частично/частично | Да | Есть текст | Высокая | Да, числовые | Низкие/Ср | Да | Частично | Средняя | Низкие | Да | Средняя | Нет |
| LogisticRegression tech-vs-user | 80.1 | Частично уверенно | Частично | 3 | Среднее | Частично | Частично/частично | Да | Есть текст | Высокая | Да, числовые | Низкие | Да | Частично | Средняя | Низкие | Да | Средняя | Нет |

### 2) Не реализована ли фича в других .md

| Критерий | Итоговая оценка | Предсказуемость исправлений | Авто‑фиксируемость | Быстрая правка (итераций) | Влияние на задачу | Рекомендации (конкретные) | Согласованность | Рекомендации (общие) | Обоснованность | Понятность | Метрики (вывод) | Затраты запуска (1 фича) | Описание критерия в отчёте | Точность | Простота реализации | Затраты поддержки | User‑friendly | Популярность | Реализован сейчас |
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
| BM25Okapi | 99.5 | Да | Частично | 1 | Среднее | Да | Да | Да | Есть текст | Высокая | Да, числовые | Низкие | Да | Частично | Высокая | Низкие | Да | Высокая | Нет |
| TF‑IDF cosine | 98.95 | Да | Частично | 1 | Среднее | Да | Да | Да | Есть текст | Высокая | Да, числовые | Низкие/Ср | Да | Частично | Высокая | Низкие | Да | Высокая | Частично |
| MinHash/LSH duplicates | 94.0 | Да | Частично | 2 | Среднее | Частично | Да | Да | Есть текст | Высокая | Да, числовые | Низкие | Да (пары) | Частично | Средняя | Низкие | Да | Средняя | Нет |
| Cross‑ref goal match | 94.0 | Да | Частично | 1 | Среднее | Частично | Да | Да | Есть текст | Высокая | Да, числовые | Низкие | Да | Частично | Высокая | Низкие | Да | Средняя | Нет |
| BM25+RM3 | 85.0 | Частично уверенно | Частично | 2 | Среднее | Частично | Да | Да | Есть текст | Средняя | Да, числовые | Ср | Да | Частично | Средняя | Низкие | Да | Средняя | Нет |

### 3) Покрыты ли все сценарии .md в .feature

| Критерий | Итоговая оценка | Предсказуемость исправлений | Авто‑фиксируемость | Быстрая правка (итераций) | Влияние на задачу | Рекомендации (конкретные) | Согласованность | Рекомендации (общие) | Обоснованность | Понятность | Метрики (вывод) | Затраты запуска (1 фича) | Описание критерия в отчёте | Точность | Простота реализации | Затраты поддержки | User‑friendly | Популярность | Реализован сейчас |
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
| kw_hit_rate | 105.5 | Да | Да | 6–10 | Среднее | Да | Да | Да | Есть текст | Высокая | Да, числовые | Низкие | Да | Частично | Высокая | Низкие | Да | Высокая | Да |
| Jaccard lemma overlap | 105.5 | Да | Да | 1 | Среднее | Да | Да | Да | Есть текст | Высокая | Да, числовые | Низкие | Да | Частично | Высокая | Низкие | Да | Высокая | Да |
| Cardinality alignment | 105.5 | Да | Да | 1 | Среднее | Да | Да | Да | Есть текст | Высокая | Да, числовые | Низкие | Да | Частично | Средняя | Низкие | Да | Средняя | Нет |
| BM25Okapi | 103.5 | Да | Частично | 1 | Высокое | Да | Да | Да | Есть текст | Высокая | Да, числовые | Низкие | Да | Частично | Высокая | Низкие | Да | Высокая | Нет |
| step_hit_rate | 103.45 | Да | Частично | 2 | Высокое | Да | Да | Да | Есть текст | Высокая | Да, числовые | Низкие/Ср | Да | Частично | Средняя | Низкие | Да | Высокая | Да |
| TF‑IDF cosine | 102.95 | Да | Частично | 1 | Высокое | Да | Да | Да | Есть текст | Высокая | Да, числовые | Низкие/Ср | Да | Частично | Высокая | Низкие | Да | Высокая | Частично |
| Graph coverage analysis | 101.95 | Да | Частично | 2 | Высокое | Да | Да | Да | Есть текст | Высокая | Да, числовые | Низкие/Ср | Да | Частично | Средняя | Низкие | Да | Средняя | Нет |
| Boundary conditions coverage | 99.6 | Частично уверенно | Частично | 2 | Высокое | Да | Да | Да | Есть текст | Высокая | Да, числовые | Низкие | Да | Частично | Средняя | Низкие | Да | Средняя | Нет |
| hit_rate | 97.0 | Да | Частично | 2 | Высокое | Да | Да | Да | Есть текст | Высокая | Да, числовые | Ср/Выс | Да | Да | Средняя | Средние | Да | Высокая | Да |
| Named entity alignment | 89.55 | Частично уверенно | Частично | 2 | Среднее | Частично | Да | Да | Есть текст | Высокая | Да, числовые | Низкие/Ср | Да | Частично | Средняя | Низкие | Да | Средняя | Нет |
| nli_hit_rate | 82.9 | Частично неуверенно | Частично | 3 | Высокое | Частично | Да | Да | Есть текст | Средняя | Да, числовые | Высокие | Да | Да | Низкая | Средние | Нет | Средняя | Да |

### 4) Каждый сценарий проверяет аспект фичи

| Критерий | Итоговая оценка | Предсказуемость исправлений | Авто‑фиксируемость | Быстрая правка (итераций) | Влияние на задачу | Рекомендации (конкретные) | Согласованность | Рекомендации (общие) | Обоснованность | Понятность | Метрики (вывод) | Затраты запуска (1 фича) | Описание критерия в отчёте | Точность | Простота реализации | Затраты поддержки | User‑friendly | Популярность | Реализован сейчас |
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
| Пер‑сценарное соответствие | 101.95 | Да | Частично | 2 | Высокое | Да | Да | Да | Есть текст | Высокая | Да, числовые | Низкие/Ср | Да | Частично | Средняя | Низкие | Да | Средняя | Нет |
| Trace density | 98.5 | Да | Частично | 1 | Среднее | Да | Да | Да | Есть текст | Высокая | Да, числовые | Низкие | Да | Частично | Высокая | Низкие | Да | Низкая | Нет |
| Scenario Outline quality | 78.1 | Частично уверенно | Частично | 2 | Среднее | Частично | Частично/частично | Да | Есть текст | Высокая | Да, числовые | Низкие | Да | Частично | Средняя | Низкие | Да | Средняя | Нет |
| UI traceability | 77.05 | Частично уверенно | Частично | 2 | Среднее | Частично | Частично/частично | Да | Есть текст | Высокая | Да, числовые | Низкие/Ср | Да | Частично | Средняя | Низкие | Да | Средняя | Нет |
| Determinism heuristic | 76.6 | Частично уверенно | Частично | 2 | Среднее | Частично | Частично/частично | Да | Есть текст | Высокая | Да, числовые | Низкие | Да | Частично | Высокая | Низкие | Да | Средняя | Нет |

### 5) Дополнительные (качество/структура)

| Критерий | Итоговая оценка | Предсказуемость исправлений | Авто‑фиксируемость | Быстрая правка (итераций) | Влияние на задачу | Рекомендации (конкретные) | Согласованность | Рекомендации (общие) | Обоснованность | Понятность | Метрики (вывод) | Затраты запуска (1 фича) | Описание критерия в отчёте | Точность | Простота реализации | Затраты поддержки | User‑friendly | Популярность | Реализован сейчас |
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
| Валидность шапки `.feature` | 103.5 | Да | Да | 1 | Среднее | Да | Да | Да | Есть текст | Высокая | Да, категор. | Низкие | Да | Да | Высокая | Низкие | Да | Высокая | Нет |
| UI‑smoke | 96.0 | Да | Частично | 1 | Среднее | Да | Да | Да | Есть текст | Высокая | Да, категор. | Низкие | Да | Частично | Высокая | Низкие | Да | Высокая | Нет |
| Дубликаты сценариев | 92.95 | Да | Частично | 2 | Среднее | Частично | Да | Да | Есть текст | Высокая | Да, числовые | Низкие/Ср | Да | Частично | Средняя | Низкие | Да | Средняя | Нет |
| Goal≈Function (GFS) | 92.45 | Да | Частично | 2 | Среднее | Частично | Да | Да | Есть текст | Высокая | Да, числовые | Низкие/Ср | Да | Частично | Высокая | Низкие | Да | Средняя | Да |
| Противоречия: Then‑NLI, Then‑NEG, GW/Title/Adj‑div | 83.1 | Частично уверенно | Нет | 3 | Высокое | Частично | Да | Да | Есть текст | Средняя | Да, числовые | Ср/Выс | Да | Да | Средняя | Средние | Да | Средняя | Да |
| NegEx‑RU | 83.0 | Да | Частично | 1 | Среднее | Частично | Частично/частично | Да | Есть текст | Высокая | Да, числовые | Низкие | Да | Частично | Средняя | Низкие | Да | Средняя | Нет |
| TEV (исполняемость) | 80.5 | Да | Нет | 3 | Высокое | Частично | Да | Да | Есть текст | Средняя | Да, числовые | Ср/Выс | Да | Да | Низкая | Средние | Да | Высокая | Нет |

Отсортировано по убыванию «Итоговой оценки» внутри каждой группы.

### Краткие рекомендации по внедрению недостающих критериев
- FVI_mit: добавить структурный чек (наличие `Цель:`, секции «Описание фичи»), single‑intent (кластер TF‑IDF), user‑centricity (лексикон тех‑термов), observability (лексемы наблюдаемых исходов). Отчёт — подсветка проблемных предложений.
- Дубликаты .md: TF‑IDF/BM25 на `goal` и `acc_units`; выводить пары похожих пунктов и порекомендовать объединение/разведение.
- Пер‑сценарное соответствие: для каждого `Сценарий:` считать максимум покрытия по `acc_units` и помечать «осиротевшие»; предлагать ближайший `acc_unit` и перефраз Then.
- Негатив/UI/Теги/Дубликаты сценариев: лёгкие эвристики и регулярки; отчёт — бинарные флаги и адресные советы.


